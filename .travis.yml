language: python

install:
  - if [ "$HG_VERSION" != "dev" ];
    then pip install -q Mercurial${HG_VERSION+==$HG_VERSION};
    else pip install -q http://selenic.com/repo/hg/archive/tip.tar.gz;
    fi
  - if [ "$HG_GIT_VERSION" != "dev" ];
    then pip install -q dulwich${HG_GIT_VERSION+==$HG_GIT_VERSION};
    else pip install -q https://bitbucket.org/durin42/hg-git/get/tip.tar.bz2;
    fi

before_script:
  - git --version || true
  - hg --version || true
  - pip show hg-git dulwich

script:
  - make test

matrix:
  include:
    - env: HG_VERSION=2.9.1
    - env: HG_VERSION=2.8.2
    - env: HG_VERSION=2.7.2
    - env: HG_VERSION=3.0.1
    - env: HG_VERSION=3.1.2
    - env: HG_VERSION=3.2.4
    - env: HG_VERSION=dev
    - python: 2.7
    - python: 2.6
